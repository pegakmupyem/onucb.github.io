<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <nav class="navbar">
    <div class ="container">
<a href ="/api" class="navbar-brand">id KinoPoisk</a>
    </div>
</nav>
<div class="container">  
<div class = "jumbotron">
    <h3 class="text-center">
        Поиск фильма
    </h3>
    <form id="search-form">
        <input type="text" class="form-control" id="searchText"
        placeholder="Введение названия">
    </form>
</div>
</div>
<div class="container">
    <div id="movies" class="row"></div>
</div>
<script>

const searchForm = document.querySelector('#search-form');
const movie = document.querySelector('#movies');
function apiSearch(event){
    event.preventDefault();
  const searchText = document.querySelector('.form-control').value,
  server = 'https://api.themoviedb.org/3/search/multi?api_key=98771c266fc9b4e8718a2a598a7b1232&language=ru&query=' +

  searchText; // можно считать что api это БД
 requestApi('GET', server);
}

searchForm.addEventListener('submit', apiSearch);
function requestApi(method, url){

    const request = new XMLHttpRequest();
    request.open(method, url);
   request.send();

   request.addEventListener('readystatechange', () => {
if (request.readyState !== 4) return;


if(request.status !== 200) {
    console.log('error: ' + request.status);
return;
}
const output = JSON.parse(request.responseText);

let inner = '';

output.results.forEach(function(item){
let nameItem = item.name || item.title;
console.log(nameItem);
inner += inner + '<div class="col-3">' + nameItem + '</div>';
});

movie.innerHTML = inner;



});

}

</script>
</body>
</html>
